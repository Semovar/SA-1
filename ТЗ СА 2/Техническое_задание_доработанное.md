# Техническое задание: Система управления блокировками клиентов

## Контекст и цель
Система предназначена для управления блокировками платежных операций клиентов с разделением на типы блокировок и ведением аудита всех операций.

## Бизнес-требования
### Основные возможности
1. **Блокировка платежей клиента** - предотвращение проведения платежных операций
2. **Разблокировка клиента** - восстановление возможности проведения операций  
3. **Проверка статуса блокировки** - получение текущего статуса блокировки клиента
4. **Типы блокировок:**
   - `FRAUD` - мошеннические операции
   - `INCORRECT_DETAILS` - ошибки в реквизитах (добропорядочные транзакции)

### Бизнес-ценность
- Снижение рисков мошеннических операций
- Минимизация финансовых потерь
- Автоматизация процессов блокировки/разблокировки
- Полная аудируемость операций

## Функциональные требования

### 1. Управление блокировками
**FR-001:** Оператор должен иметь возможность вручную заблокировать клиента через веб-интерфейс
- **Вход:** ID клиента, тип блокировки, причина
- **Выход:** Подтверждение создания блокировки или ошибка

**FR-002:** Система должна автоматически блокировать клиента при обнаружении рисков мошенничества
- **Триггер:** Событие от системы мониторинга рисков
- **Тип блокировки:** FRAUD

**FR-003:** Система должна блокировать клиента после multiple ошибок в реквизитах
- **Условие:** ≥3 ошибок в реквизитах в течение 24 часов
- **Тип блокировки:** INCORRECT_DETAILS

### 2. Управление разблокировками
**FR-004:** Оператор должен иметь возможность разблокировать клиента вручную
- **Вход:** ID клиента
- **Выход:** Подтверждение снятия блокировки

**FR-005:** При разблокировке должна создаваться запись в аудит-логе

### 3. Проверка статуса
**FR-006:** Система должна предоставлять текущий статус блокировки клиента
- **Интерфейс:** REST API endpoint
- **Формат ответа:** Статус блокировки, тип, дата создания, причина

### 4. Аудит и мониторинг
**FR-007:** Система должна вести полный аудит всех операций блокировки/разблокировки
- **Данные для аудита:** ID операции, ID клиента, тип операции, пользователь/система, timestamp, причина
- **Срок хранения:** 5 лет

## Нефункциональные требования

### Производительность
- **Время ответа API:** <200 мс для 95% запросов
- **Доступность:** 99% uptime
- **Поддерживаемая нагрузка:** до 1000 операций блокировки/час

### Безопасность
- Аутентификация и авторизация операторов
- Валидация входных данных
- Логирование security-событий

## Ограничения
- Интеграция с существующей системой клиентов
- Использование корпоративной базы данных
- Соответствие внутренним стандартам разработки

---

## Дополнительные материалы
- [API спецификация](API_Specification.yaml)
- [Схема базы данных](Database_Schema.png) 
- [Диаграммы процессов](diagrams/)